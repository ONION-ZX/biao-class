{"code":"!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.r=function(t){Object.defineProperty(t,\"__esModule\",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,\"a\",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p=\"\",n(n.s=7)}([function(t,e,n){var i,r=n(6),a=document.getElementById(\"history-list\"),o=n(5),c=n(3);function s(t){r.set(\"list\",t)}function u(){a.innerHTML=\"\",i.forEach(function(t){var e,n=document.createElement(\"div\");n.classList.add(\"history\"),n.dataset.history=t,n.innerHTML=`\\n        <div class=\"text\">${t}</div>\\n        <div class=\"tool\">\\n          <span class=\"delete\">删除</span>\\n        </div>`,e=n.querySelector(\".delete\"),a.appendChild(n),n.addEventListener(\"click\",function(t){t.target.classList.contains(\"delete\")||(c.set_keyword(this.dataset.history),c.search())}),e.addEventListener(\"click\",d)})}function d(){var t=this.closest(\".history\").dataset.history;o.find_and_delete(i,t)&&(s(i),setTimeout(function(){u()},100),i.length||(a.hidden=!0))}t.exports={reload_list:function(){i=r.get(\"list\")||[]},render_list:u,show_list:function(){i.length&&(a.hidden=!1)},hide_list:function(){a.hidden=!0},append:function(t){console.log(t),o.find_and_delete(i,t),i.unshift(t),s(i)}}},function(t,e){var n,i,r,a=5;t.exports={get_keyword:function(){return n},set_keyword:function(t){return n=t},get_limit:function(){return a},set_limit:function(t){return a=t},get_current_page:function(){return i},set_current_page:function(t){return i=t},get_amount:function(){return r},set_amount:function(t){return r=t}}},function(t,e){var n={form:document.getElementById(\"search-form\"),input:document.getElementById(\"search-input\"),placeholer:document.getElementById(\"placeholer\"),top:document.getElementById(\"top\"),pagination:document.getElementById(\"pagination\"),pagination_start:document.getElementById(\"pagination-start\"),pagination_end:document.getElementById(\"pagination-end\"),pagination_container:document.getElementById(\"pagination-container\"),user_list:document.getElementById(\"user-list\")};t.exports=n},function(t,e,n){var i,r,a,o=n(2),c=n(1),s=5;function u(){o.pagination.innerHTML=\"\"}function d(){o.pagination_container.hidden=!1,u(),r=Math.ceil(c.get_amount()/c.get_limit());var t,e,n=Math.ceil(s/2),i=c.get_current_page();i<=n?(t=1,e=s):i>=r-n?(t=r-s,e=r):(t=i-n+1,e=i+n-1),t<1&&(t=1),e>r&&(e=r);for(var a=t;a<=e;a++){var d=a,p=document.createElement(\"button\");p.innerText=d,p.classList.add(\"pager\"),i==d&&p.classList.add(\"active\"),o.pagination.appendChild(p),p.addEventListener(\"click\",l(d))}}function l(t){return function(e){current_page=c.set_current_page(t),p()}}function p(){var t=new XMLHttpRequest;t.open(\"get\",\"https://api.github.com/search/users?q=\"+c.get_keyword()+\"&page=\"+c.get_current_page()+\"&per_page=\"+c.get_limit()),n(0).append(c.get_keyword()),t.setRequestHeader(\"Authorization\",\"Basic \"+btoa(\"biaoyansu:94bfe1cf32b7aa3d0c2cbdd94958510841afece0\")),t.send(),t.addEventListener(\"load\",function(){var e;a=JSON.parse(t.responseText),c.set_amount(a.total_count),e=\"\",a.items.forEach(function(t){e+=`\\n  <div class=\"user\">\\n    <a class=\"avatar\" target=\"_blank\" href=\"${t.html_url}\">\\n      <img src=\"${t.avatar_url}\">\\n    </a>\\n    <div class=\"info\">\\n      <div class=\"username\">${t.login}</div>\\n      <div><a target=\"_blank\" href=\"${t.html_url}\">${t.html_url}</a></div>\\n    </div>\\n  </div>\\n    `}),o.user_list.innerHTML=e,document.getElementById(\"amount\").innerHTML=`共有${a.total_count}条结果`,i=c.get_current_page()*c.get_limit()>=c.get_amount(),o.placeholer.hidden=!i,d()})}t.exports={search:p,reset_page:function(){c.set_current_page(1)},reset_user_list:function(){o.user_list.innerHTML=\"\"},clear_pagination:u,hide_pagination:function(){o.pagination_container.hidden=!0},set_keyword:function(t){o.input.value=t,c.set_keyword(t)}}},function(t,e,n){var i=n(2),r=n(0),a=n(3),o=n(1);t.exports={bind_all:function(){i.form.addEventListener(\"submit\",function(t){t.preventDefault();var e=o.set_keyword(i.input.value);e?(a.reset_page(),a.reset_user_list(),i.placeholer.hidden=!0,a.search(e),a.clear_pagination(),a.hide_pagination()):alert(\"你闹呢\")}),i.top.addEventListener(\"click\",function(){window.scrollTo(0,0)}),i.pagination_start.addEventListener(\"click\",function(){goto_page(1)}),i.pagination_end.addEventListener(\"click\",function(){goto_page(page_amount)}),i.input.addEventListener(\"click\",function(){r.show_list()}),document.documentElement.addEventListener(\"click\",function(t){var e=t.target,n=e.closest(\"#search-input\"),i=e.closest(\"#history-list\");n||i||r.hide_list()})}}},function(t,e){t.exports={find_and_delete:function(t,e){var n=t.indexOf(e);return-1!=n&&(t.splice(n,1),!0)}}},function(t,e){t.exports={set:function(t,e){var n=JSON.stringify(e);localStorage.setItem(t,n)},get:function(t){var e=localStorage.getItem(t);return JSON.parse(e)}}},function(t,e,n){var i=n(0),r=n(4);i.reload_list(),i.render_list(),r.bind_all()}]);","extractedComments":[]}