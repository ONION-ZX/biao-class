<meta charset="utf-8">
<form id="todo-form" action="http://baidu.com"> <!-- => {title: eat, completed: false, remind_at: 2018-...} -->
  <input type = "hidden" name = "id" value = "1">
  <input name="title" type="text" value="yo"><br>
  <label>
    <input name="completed" type="checkbox"> 完成
  </label><br>
  <!--<input type="color" name="color">-->
  <textarea name="desc">
  我是一段描述
  </textarea>
  <button type="submit">添加任务</button>
</form>

<script>
  ;(function() {
    'use strict';
    var todo_list = [
      {
        name:'shopping',
        completed: false,
      },
    ];

    function get_form_data(form_selector) {
      var data = {};
      var form = document.querySelector(form_selector);
      var list = form.querySelectorAll('[name]');

      list.forEach(function(input) {
        var name = input.name;
        var type = input.type;
        var value = value;

        if(name == 'id')
        value = parseInt(value);
        switch (input.nodeName) {
          case 'INPUT':
            switch (type) {
              case 'text':
              case 'search':
              case 'number':
                value = parseFloat(value);
                break;
              case 'password':
                data[name] = value;
                break;
              case 'hidden':
                data[name] = value;
              case 'radio':
              case 'checkbox':
                data[name] = input.checked;
                break;

            }
            break;
          case 'TEXTAREA':
            data[name] = value;
             break;
        }
      });
      return data;
    }

    var todo_row = get_form_data('#todo-form');
    console.log(todo_row);
  })();
</script>
